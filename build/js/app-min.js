function viewController(){currentViewModel.getTemplate().done(function(e){currentViewModel.set({template:_.template(e)}),switchPage(currentViewModel.get("templatePage"))})}function switchPage(e){switch(currentView&&(pageList.indexOf(e)>pageList.indexOf(currentView.el.classList[0])?(this.translate="translateRight",this.slide="slideLeft"):(this.translate="transalateLeft",this.slide="slideRight")),e){case"mainPage":tmpCurrentView=new MainPageView;break;case"work":tmpCurrentView=new WorkView;break;case"about":tmpCurrentView=new AboutView;break;case"contact":tmpCurrentView=new ContactView}var t=this;this.translate?($(tmpCurrentView.el).addClass(this.translate).addClass("container-fluid").addClass(this.slide),$(tmpCurrentView.el).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){currentView.close(),$(tmpCurrentView.el).removeClass(t.translate).removeClass(t.slide).removeClass("container-fluid"),currentView=tmpCurrentView,$(this).off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd")})):currentView=tmpCurrentView}var pageList=["mainPage","work","about","contact"],currentViewModel=new CurrentViewModel,menuView=new MenuView(currentViewModel),currentView=void 0,tmpCurrentView=void 0;currentViewModel.on("change:templatePage change:lang",function(){tmpCurrentView&&$(tmpCurrentView).is(":animated")&&currentView.close(),viewController()}),$(".lang").click(function(e){currentViewModel.set({lang:e.target.id}),document.documentElement.lang=currentViewModel.get("lang"),menuView.render()}),$(".currentView").on("swipeleft",function(e){var t=pageList.indexOf(currentViewModel.get("templatePage"));t<3&&(window.location="#"+pageList[t+1])}),$(".currentView").on("swiperight",function(e){var t=pageList.indexOf(currentViewModel.get("templatePage"));t>0&&(window.location="#"+pageList[t-1])});var menuRouter=new MenuRouter;Backbone.history.start();